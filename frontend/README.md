# 設計ドキュメント

### プロダクト全体像

（介護施設職員間、利用者家族の間での情報共有を効率化し、介護職員・利用者家族ともに負担を軽減。コミュニケーションの摩擦軽減）したい
（介護施設職員）向けの、
（CareBridge（ケアブリ））というプロダクトは、
（介護施設情報共有システム）である。
これは、（介護現場における情報の正確性、アクセス性、効率性を向上させること）ができ、
（一般的な情報一元管理サービス）とは違って、
（双方向から情報提供をしやすい機能）が備わっている。

ロゴ（仮）

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/9253397d-598f-4d4b-b1a7-c4bc2e3b6f4e/3ebf4966-5ba9-4884-b133-0555d900ff0a/Untitled.png)

| 項目             | 内容                                                                       |
| ---------------- | -------------------------------------------------------------------------- |
| プロジェクト名   | CareBridge（ケアブリ）                                                     |
| 作成日           | 2024-08-01                                                                 |
| 作成者           | あみ・はるか・ななこ                                                       |
| プロダクトの概要 | 介護施設職員と利用者家族の情報を一括管理し、共有を効率化するためのシステム |

- ビジネスモデル
  ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/9253397d-598f-4d4b-b1a7-c4bc2e3b6f4e/f17f2aa3-91e1-4341-a2d5-f13000bf16bb/Untitled.jpeg)

### 1. 背景と目的

| 項目               | 内容                                                                                                                 |
| ------------------ | -------------------------------------------------------------------------------------------------------------------- |
| 現状の問題点       | 高齢化が進み介護人材が不足している中、介護施設職員と利用者家族の間での情報共有が手間であり、効率的でない。           |
| 解決したい課題     | 情報共有の手間削減、情報の正確性とアクセスの向上                                                                     |
| ターゲットユーザー | 介護施設職員（利用者家族）                                                                                           |
| プロダクトの目的   | 情報共有を一括管理することで、情報の正確性、アクセス性、効率性を向上させる。双方向から情報提供をしやすいようにする。 |

### 2. 機能要件

- 画面遷移図
  ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/9253397d-598f-4d4b-b1a7-c4bc2e3b6f4e/edd8c93d-ff19-49a2-9ffd-a50cae9cd27d/Untitled.jpeg)

| 機能カテゴリ           | サブカテゴリ             | 機能内容                                                             |
| ---------------------- | ------------------------ | -------------------------------------------------------------------- |
| ユーザー管理           | ユーザー登録             | - 介護施設職員および利用者家族のアカウント登録機能                   |
|                        |                          | - 必要情報（名前、メールアドレス、パスワードなど）の入力と保存       |
|                        | ログイン/ログアウト      | - 認証機能（メールアドレスとパスワード）                             |
|                        |                          | - セッション管理                                                     |
| 職員用ダッシュボード   | 連絡事項管理             | - 利用者に関する連絡事項の表示、登録、編集、削除                     |
|                        | 健康状態管理             | - 利用者の健康状態の表示、登録、編集、削除                           |
|                        | 家族からのシェア情報管理 | - 家族からの情報共有（健康情報、連絡先など）の表示、登録、編集、削除 |
| 利用者用ダッシュボード | メンバー登録             | - 家族メンバーの登録、情報の表示、編集、削除                         |
|                        | 連絡事項管理             | - 家族からの連絡事項の表示、登録、編集、削除                         |
|                        | 健康状態管理             | - 家族からの健康情報の表示、登録、編集、削除                         |
|                        | 医療情報管理（ORM）      | - 医療記録の表示、登録、編集、削除                                   |
| 管理者用画面           | 施設情報管理             | - 施設情報の表示と編集                                               |
|                        | 職員登録管理             | - 新規職員の登録、情報の表示、編集、削除                             |
|                        | 利用者登録管理           | - 新規利用者の登録、情報の表示、編集、削除                           |

### 3. 非機能要件

| 項目             | 内容 |
| ---------------- | ---- |
| パフォーマンス   |      |
| スケーラビリティ |      |
| 可用性           |      |
| セキュリティ     |      |
| ユーザビリティ   |      |

### 4. 技術スタック

| 項目                     | 内容                                                                                                                                                                                                                                                                                       |
| ------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| フロントエンド技術       | React/next.js 　：BC 中使い慣れてるため。世界的にも利用率が高いため。                                                                                                                                                                                                                      |
| バックエンド技術         | Python/Django 　：Python は LLM に適している。（豊富なライブラリ、活発なコミュニティ、簡潔なシンタックス、高度なデータ処理能力、統合環境の提供、そして API との統合が容易であるため）/Django は大規模開発に最適で、迅速な開発、強力な ORM、優れたセキュリティ、そして LLM との統合が容易。 |
| データベース             | PostgreSQL：正確なデータ管理、機能の豊富さ、そして高いセキュリティ機能を兼ね備えており、介護施設情報共有システムに適してると考えたから                                                                                                                                                     |
| クラウドプラットフォーム | AWS：拡張性、信頼性、広範なサービスと 24 時間日本語サポートが強みのため。                                                                                                                                                                                                                  |
| 認証機能                 | Firebase：コストが抑えられる（無料プランでも多くの機能が使用可能）であることと、BC の学習で使用し使い慣れているため。                                                                                                                                                                      |
| 決済機能                 | Stripe                                                                                                                                                                                                                                                                                     |

- 技術選定の理由と比較
  ### 技術選定の理由
  1. **フロントエンド技術: React/Next.js**
     - **理由**
       ① 学習コストが低く、コンポーネントベースのアーキテクチャで大規模アプリケーションの開発に適しているため。
       ② 学習で使用したもので対応した
     - **比較対象:** Vue.js は小中規模プロジェクトに適しているが、大規模アプリには不向き。Angular は大規模開発に適しているが、学習コストが高い。
  2. **バックエンド技術: Python/Django**
     - **理由**
       ① 高速でフルスタックフレームワークであり、大規模開発に適しているため。
       ② 統合された管理インターフェースと認証機能が標準で提供されるため、迅速な開発が可能。
       ③ 強力な ORM が医療情報管理（ORM）に適している。
       ④ セキュリティ機能が強力で、施設情報や利用者の情報管理に適している。
       ⑤LLM の API と統合も容易で、データ処理に強い。
     - **比較対象:** Express.js は軽量で初心者に優しいが、統合機能が少ないため、設定や機能追加に手間がかかりそう。医療情報管理（ORM）の実装に手間がかかることがありそう。大規模開発には向かない。Flask は小規模開発に最適。多くの機能を自分で実装する必要がある。
     - **Python が LLM に適してる理由**
       ### 理由
       1. **豊富なライブラリとフレームワーク**:
          - Python には機械学習や自然言語処理に特化したライブラリ（TensorFlow、PyTorch、Hugging Face Transformers など）が豊富にあります。これらは LLM の実装やカスタマイズに非常に役立ちます。
       2. **コミュニティとサポート**:
          - Python は機械学習分野で広く使用されており、大規模なコミュニティが存在します。ドキュメントやチュートリアルが豊富で、問題解決がしやすいです。
       3. **簡潔で読みやすいコード**:
          - Python のシンタックスはシンプルで読みやすく、プロトタイプの作成や実験が迅速に行えます。これにより、LLM のトレーニングや微調整を効率的に行うことができます。
       4. **高度なデータ処理能力**:
          - データ処理ライブラリ（Pandas、NumPy など）が充実しており、大量のデータを効率的に処理できます。LLM は大量のデータを扱うため、これらのツールが役立ちます。
       5. **統合環境の提供**:
          - Jupyter Notebook などのインタラクティブな開発環境を提供しており、コードの実行や結果の確認が容易です。これにより、LLM のトレーニングや評価を効率的に行えます。
       6. **API との統合**:
          - Python は API の作成や利用が容易であり、Flask や FastAPI などのフレームワークを使用して LLM を Web アプリケーションとして公開することができます。
       ### 比較対象
       1. **R**:
          - R もデータサイエンスや機械学習に使用されますが、Python ほど広範なライブラリはありません。特に LLM の分野では、Python の方が多くのツールとサポートがあります。
       2. **JavaScript**:
          - JavaScript はフロントエンド開発に適していますが、機械学習や自然言語処理には不向きです。特に LLM のトレーニングや実装には Python の方が適しています。
       3. **Java**:
          - Java はスケーラビリティとパフォーマンスに優れていますが、機械学習や自然言語処理のライブラリが限られています。Python の方が柔軟で使いやすいです。
       ### 結論
       LLM を使用するプロジェクトでは、Python が最適な選択です。豊富なライブラリ、活発なコミュニティ、簡潔なシンタックス、高度なデータ処理能力、統合環境の提供、そして API との統合が容易であるため、Python を使用することで効率的かつ効果的な開発が可能です。
  3. **データベース: PostgreSQL**

     - **理由:**
       **① データ整合性と信頼性**: PostgreSQL は高度なトランザクション管理とデータ整合性機能を持ち、データの正確性と一貫性を保つのに優れています。介護施設では、個人情報や機密データを正確に管理する必要があり、これが大きな利点です。
       **② 機能の豊富さ**: PostgreSQL は JSONB 形式のサポートや複雑なクエリ処理など、多くの高度な機能を提供しています。これにより、将来的な機能追加やデータ操作の複雑さに対応できます。
       **③ セキュリティ**: PostgreSQL は強力なセキュリティ機能を提供し、データの保護やアクセス管理に優れています。介護施設のデータを安全に保つために重要です。

     **比較対象:**

     **①MySQL**:

     - **メリット**: 読み取り処理が速く、設定がシンプルで初心者にも扱いやすい点があります。また、多くのホスティングサービスでサポートされています。
     - **デメリット**: 複雑なトランザクション管理や高度な機能が制限されることがあり、データ整合性の要求が高い場合には不向きです。

     **②MongoDB**:

     - **メリット**: スキーマレス設計でデータ構造が柔軟に対応でき、スケーラビリティが高い点が強みです。また、開発が迅速に進められるのもメリットです。
     - **デメリット**: データ整合性の管理が難しく、複雑なトランザクションには不向きです。クエリ処理の複雑さもリレーショナルデータベースに比べて難しい場合があります。

     **まとめ:**

     PostgreSQL は正確なデータ管理、機能の豊富さ、そして高いセキュリティ機能を兼ね備えており、介護施設情報共有システムに最も適しています。一方で、MongoDB はデータ構造の柔軟性とスケーラビリティに優れていますが、データ整合性の管理が難しく、複雑なトランザクションには不向きです。MySQL もシンプルで使いやすいですが、高度なデータ整合性機能や拡張性の面では PostgreSQL に劣ります。

     - **MySQL、PostgreSQL、MongoDB の比較**
       ### MySQL
       **メリット**
       - **パフォーマンス**: 読み取り処理が速く、一般的なクエリやトランザクションに対して良好なパフォーマンスを発揮します。
       - **シンプルさ**: 設定や運用が比較的シンプルで、初心者に優しい。
       - **広範なサポート**: 多くのホスティングサービスやツールでサポートされています。
       **デメリット**
       - **データ整合性**: 複雑なトランザクションやデータ整合性要求には、PostgreSQL ほどの強みがない。
       - **機能制限**: 一部の高度な機能が制限されることがあります。
       ### PostgreSQL
       **メリット**
       - **データ整合性**: 高度なトランザクション管理とデータ整合性機能により、正確なデータ管理が可能です。
       - **機能の豊富さ**: JSONB サポート、複雑なクエリ処理、拡張性などが充実しています。
       - **セキュリティ**: 高いセキュリティ機能を提供し、機密情報の管理に適しています。
       **デメリット**
       - **パフォーマンス**: 書き込み処理において MySQL より劣る場合がありますが、チューニングで改善可能です。
       - **運用の複雑さ**: 設定や運用が MySQL よりも複雑な場合があります。
       ### MongoDB
       **メリット**
       - **スキーマレス設計**: データ構造が柔軟で、異なるデータ型や構造を簡単に扱うことができます。プロジェクトの進行に伴うデータの変化に対応しやすいです。
       - **スケーラビリティ**: 水平スケーリングが容易で、大量のデータやトラフィックを処理するのに適しています。
       - **迅速な開発**: スキーマの設計が不要で、迅速に開発を進めることができます。
       **デメリット**
       - **データ整合性**: トランザクションの管理がリレーショナルデータベースよりも難しく、複雑なトランザクションには不向きです。
       - **クエリの複雑さ**: データベース内での複雑なクエリ処理が、リレーショナルデータベースに比べて難しい場合があります。
       ###
       **まとめ**: **PostgreSQL**は正確なデータ管理、機能の豊富さ、セキュリティに優れており、介護施設情報共有システムに最も適しています。一方、**MongoDB**はデータ構造の柔軟性とスケーラビリティが強みですが、トランザクション管理の難しさを考慮する必要があります。

  4. **クラウドプラットフォーム: AWS**
     - **理由:**  拡張性が高く、信頼性も高い世界トップシェアのクラウドサービスで、24 時間 365 日の日本語サポートも利用できるため。また、顧客側のリクエストに応える形で多くのサービスを提供しており、企業やユーザーのさまざまな用途に対応することができます。
     - **比較対象:** GCP はビッグデータ処理や AI/機械学習に強みがあるが、サービスの範囲が AWS より狭い。Azure は Microsoft 製品との相性が良いが、コストが高くなることがある。
  5. **認証機能: Firebase**
     - **理由:**  無料プランでも多くの機能が使用可能で、SSL/TLS で通信が暗号化されるため。
     - **比較対象:** Auth0 は多機能でカスタマイズ性が高いが、ユーザー数が増えるとコストが高くなる。
  6. **決済機能: Stripe**
     - **理由:**  簡単に導入でき、多くの国際通貨をサポートするため。
     - **比較対象:**  銀行 API を使うと手数料が安いことが多いですが、銀行ごとに API の使い方が異なるため、実装が難しく時間がかかることがあります。また、認証プロセスやセキュリティ要件が厳格で導入が大変です。

### 5. システムアーキテクチャ

| 項目                 | 内容                                                 |
| -------------------- | ---------------------------------------------------- |
| フロントエンド       | ユーザーインターフェースの設計と実装                 |
| バックエンド         | ビジネスロジック、データ処理、API の設計と実装       |
| データベース         | データモデルの設計と実装                             |
| インフラストラクチャ | サーバー設定、ネットワーク設定、クラウドリソース管理 |
| セキュリティ         | 認証、認可、データ暗号化、アクセス制御の設計と実装   |

### 6. プロジェクト管理

| 項目                   | 内容                                                               |
| ---------------------- | ------------------------------------------------------------------ |
| 開発スケジュール       | （開発、テスト、リリースのスケジュール）                           |
| タスク管理             | （各機能のタスクと担当者、進捗状況の管理）                         |
| リソース管理           | （必要な人員、技術、予算の管理）                                   |
| リスク管理             | （リスクの特定、評価、対応策の計画）                               |
| コミュニケーション計画 | （チーム内およびステークホルダーとのコミュニケーション方法の計画） |

### 7. テスト計画

| 項目         | 内容                                                                       |
| ------------ | -------------------------------------------------------------------------- |
| テスト戦略   | （ユニットテスト、インテグレーションテスト、エンドツーエンドテストの計画） |
| テストケース | （各機能に対する具体的なテストケースの定義）                               |
| テスト環境   | （テストを行うための環境設定と管理）                                       |
| バグ管理     | （バグの報告、追跡、修正のプロセス）                                       |

### 8. 参考資料

- **介護関連知識**
  厚生労働省　 R6 介護報酬改定（概要）
  https://www.mhlw.go.jp/stf/newpage_38790.html
  厚生労働省　医療と介護の連携の推進　 P9-13
  https://www.mhlw.go.jp/content/12300000/001230634.pdf
  東京都健康長寿医療センター研究所　介護する家族を支える
  [https://www.tmghig.jp/research/topics/家族を支えるために.pdf](https://www.tmghig.jp/research/topics/%E5%AE%B6%E6%97%8F%E3%82%92%E6%94%AF%E3%81%88%E3%82%8B%E3%81%9F%E3%82%81%E3%81%AB.pdf)
- **競合**
  介護 DX カオスマップ 2024
  https://1c754cad-db6e-4c95-8133-cb4a1d58d2d5.filesusr.com/ugd/4ed477_3d382f2b6f3b45998cb3c223e0bbf810.pdf
  介護ソフトウェア大手 1 　 youtube に介護施設導入のメリットとか利用者インタビューもある
  https://www.ndsoft.jp/
  介護ソフトウェア大手 2
  https://www.kanamic.net/care/index.html
  https://www.oya-log.com/
  https://kaigosapuri.com/
  https://page.carecollabo.jp/
- **技術関連**
  https://about.medical-care.net/html/usersguide/?_ga=2.106605955.1207191027.1722989645-1506572023.1722989645

### 9. 各種設計図

- ワイヤーフレーム素案
  https://www.figma.com/design/f8uJSbohMpWkh4RS20KpTv/Care-Bridge?t=dfsJ1Op5bNChTUof-1
- クラス図
  ![carebridge_0806_01.jpg](https://prod-files-secure.s3.us-west-2.amazonaws.com/9253397d-598f-4d4b-b1a7-c4bc2e3b6f4e/ec6e8040-3b40-4754-af0a-8dc390ba6538/carebridge_0806_01.jpg)
- DB 設計書
  https://docs.google.com/spreadsheets/d/1HSsAgi4a0By0molVQAenzZuSSOHchu71QtyFtuXZITs/edit?gid=522006135#gid=522006135
- ER 図
  [carebridge | DrawSQL](https://drawsql.app/teams/iyochica/diagrams/carebridge)
- フロー図
  ![flow.jpg](https://prod-files-secure.s3.us-west-2.amazonaws.com/9253397d-598f-4d4b-b1a7-c4bc2e3b6f4e/9fd6e275-93ed-4bba-a9c7-d63410d5b79b/flow.jpg)

[API 設計書](https://www.notion.so/API-21e4998937244ffd9e4fc0b1f647e50c?pvs=21)

[デザインガイドライン](https://www.notion.so/cfc849bea2ce49edbbde17aa1996bafb?pvs=21)
